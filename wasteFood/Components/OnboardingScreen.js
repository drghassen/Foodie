import React, { useRef, useState } from 'react';
import { View, Text, TouchableOpacity, StyleSheet, FlatList, Animated, Dimensions, Image } from 'react-native';
import { LinearGradient } from 'expo-linear-gradient';
import { Ionicons } from '@expo/vector-icons';
import { SvgXml } from 'react-native-svg';

const { width } = Dimensions.get('window');

const COLORS = {
    primary: '#4CAF50',
    secondary: '#2196F3',
    background: '#FFFFFF',
    text: '#333333',
    gradientEnd: '#727D73',
    gradientStart: '#CADABF',
};


const svgIcon = `<svg width="192" height="180" viewBox="0 0 192 180" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M91.6284 91.6301C91.2234 94.2871 93.0035 96.3991 95.1495 96.3991C98.9763 96.3991 100.962 90.7421 98.5013 88.0653C96.5643 85.9593 92.4035 86.5523 91.6284 91.6301ZM98.5563 91.6241C98.3853 93.5431 96.9093 95.3981 95.1505 95.3981C93.6485 95.3981 92.2985 93.8661 92.6175 91.7801C92.9125 89.8443 93.9485 87.9303 95.8705 87.9303C97.4263 87.9303 98.7723 89.2073 98.5563 91.6241Z" fill="#441752"/>
<path d="M114.105 18.3716C115.004 18.1286 117.66 19.3936 117.156 19.8306C117.056 19.9176 115.883 20.5576 114.383 20.4276C113.111 20.3186 113.014 18.8306 114.105 18.3716Z" fill="#441752"/>
<path d="M124.872 10.8525C124.627 10.3885 123.912 10.1815 123.405 10.5725C123.169 10.7555 122.995 11.0455 123.012 11.3565C123.06 12.2145 123.598 13.4445 123.66 13.5635C123.768 13.7675 124.052 13.7385 124.166 13.5635C124.438 13.1495 125.141 11.7215 124.972 11.0915L124.872 10.8525Z" fill="#441752"/>
<path d="M135.353 17.3977C135.519 17.0229 135.685 16.6486 136.675 16.1153H136.674C137.471 15.6853 138.377 16.3953 138.143 17.2443C138.079 17.4783 137.9 17.7253 137.684 17.8423C136.61 18.4205 136.347 18.3656 135.982 18.2894C135.793 18.2498 135.575 18.2044 135.202 18.2393C135.015 18.2573 134.971 18.0223 135.064 17.9063C135.207 17.7276 135.28 17.5626 135.353 17.3977Z" fill="#441752"/>
<path d="M127.977 25.1502C127.705 24.94 127.498 25.1281 126.495 26.0406C126.281 26.2349 126.031 26.4621 125.737 26.7252C125.425 27.0032 125.317 27.6712 125.828 28.0662C126.236 28.3812 126.86 28.3022 127.148 27.8142C127.304 27.4539 127.439 27.1463 127.555 26.8828C128.138 25.5576 128.231 25.3462 127.977 25.1502Z" fill="#441752"/>
<path d="M132.725 36.2851C132.817 36.0381 133.066 35.9201 133.31 36.0471H133.311C133.411 36.0991 134.963 37.7481 134.939 38.4061C134.883 39.9441 133.045 39.7791 132.815 38.5411C132.756 38.2371 132.616 36.5751 132.725 36.2851Z" fill="#441752"/>
<path d="M144.575 28.0145C143.661 27.9474 143.098 28.284 142.701 28.5209C142.537 28.6194 142.401 28.7006 142.28 28.7285C142.005 28.7935 142.005 29.2205 142.28 29.2855C142.281 29.2857 142.283 29.2866 142.287 29.2883L142.309 29.2999L142.361 29.327C142.576 29.4399 143.181 29.7571 143.696 29.9495C143.893 30.0235 144.209 30.0185 144.549 30.0015C145.89 29.9325 145.952 28.1135 144.575 28.0145Z" fill="#441752"/>
<path d="M115.624 36.6926C115.836 36.7026 116.047 36.7176 116.24 36.8026C116.701 36.9386 118.528 37.4956 118.11 37.7326C118.01 37.7896 116.213 38.5146 115.624 38.5426C114.838 38.5806 114.085 37.5946 114.994 36.8886C115.175 36.7486 115.395 36.6816 115.624 36.6926Z" fill="#441752"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M130.44 61.9939C128.431 59.8099 124.191 60.4979 123.406 65.6479C122.99 68.3809 124.82 70.5289 127.009 70.5289C130.92 70.5289 132.963 64.7389 130.44 61.9939ZM130.52 65.6409C130.232 68.8609 126.961 70.7529 125.133 68.6359C124.501 67.9039 124.232 66.8699 124.396 65.7979C125.262 60.1099 130.944 60.9169 130.52 65.6409Z" fill="#441752"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M80.2938 83.6369C70.8881 81.0813 65.9917 79.942 63.4463 79.3497C62.2821 79.0788 61.6097 78.9223 61.2227 78.7972C53.9395 82.7854 46.4667 86.3653 46.0218 86.3653C45.7978 86.3653 45.5988 86.2143 45.5398 85.9953C45.3926 85.4489 45.2587 84.9762 45.1421 84.5651C44.5251 82.3878 44.3968 81.9347 45.3708 81.3703C46.1698 80.9073 46.9748 80.4523 47.7838 80.0013C47.7593 79.9761 47.7343 79.9514 47.7088 79.9262L47.6698 79.8873C47.0938 79.3153 47.1328 78.7363 47.7748 78.2863L56.2748 72.3313L49.9088 72.8413C47.2598 76.0253 44.5488 79.1823 41.8198 82.2583C41.7218 82.3683 41.5848 82.4263 41.4458 82.4263C41.266 82.4263 41.238 82.4058 40.3309 81.7392L40.3287 81.7376L40.3232 81.7335C40.0308 81.5186 39.6476 81.2371 39.1398 80.8683C38.9108 80.7023 38.8668 80.3813 39.0358 80.1603C41.2378 77.2733 43.5018 74.3483 45.7768 71.4433C45.6928 71.1053 45.6608 70.7273 45.6748 70.3273C39.5779 74.3841 39.5484 74.384 38.9193 74.3824L38.8798 74.3823C38.5158 74.3823 38.2038 74.2493 37.9668 73.9813C37.7481 73.7359 37.6753 73.4435 37.6166 73.2077L37.6148 73.2003C37.5298 72.8543 37.5218 72.8413 37.2448 72.6183L37.243 72.6169C37.0012 72.421 36.6717 72.1542 36.6358 71.6883C36.5858 71.0147 37.2081 70.6237 37.4424 70.4766L48.1788 63.8343C47.7694 63.7813 47.4051 63.7347 47.079 63.6931L47.0702 63.6919C45.3683 63.4745 44.7084 63.3902 44.1158 63.2083C37.4708 65.4993 31.0718 67.4763 30.7678 67.4763C30.5338 67.4763 30.3338 67.3153 30.2808 67.0903C29.9758 65.7813 29.8528 64.4373 29.9148 63.0943C29.9528 62.2533 30.2558 61.9363 30.9558 61.6843C36.4078 59.7343 41.9068 58.0483 47.7258 56.5453C47.9248 55.1523 48.3208 53.8003 48.9088 52.5163C49.0128 52.2903 49.2678 52.1763 49.5058 52.2453L63.857 56.5034L63.8695 56.455C60.0477 55.0213 53.0393 52.1307 46.0071 48.3619C44.9211 47.7789 44.7581 47.1259 45.2591 46.1169C45.675 45.2782 45.9977 44.6211 46.2509 44.1056L46.2519 44.1036C47.0587 42.4613 47.1587 42.2576 47.3159 42.1931C47.3435 42.1817 47.3728 42.1747 47.4081 42.1649C47.5441 42.1259 47.6901 42.1479 47.8101 42.2239C51.8321 44.7719 55.9941 47.1509 60.2441 49.3359C59.8021 48.7189 59.3711 48.0949 58.9511 47.4639C58.8111 47.2519 58.8511 46.9679 59.0461 46.8039L62.1371 44.2059L62.1361 44.2089C62.3841 44.0009 62.7761 44.0769 62.9151 44.3879C63.795 46.3643 64.8179 48.2738 65.9726 50.1C66.2239 49.8266 66.5441 49.644 66.9698 49.5825C65.9476 46.1855 65.1871 42.7104 64.6987 39.1952C64.6637 38.9432 64.8227 38.7062 65.0677 38.6422L68.6397 37.7122C69.8077 37.4062 70.4017 37.9372 70.4687 39.1822L70.4677 39.1832C70.6183 41.9714 70.9398 44.753 71.4281 47.5046C72.4928 47.0128 73.5669 46.5405 74.6495 46.0882C73.7193 39.7757 74.9864 33.8604 78.8537 29.7902C76.7287 27.8612 76.7747 25.3202 78.0527 24.0652C78.6955 23.4345 79.5301 23.1881 80.32 22.955C80.5846 22.8769 80.8441 22.8003 81.0897 22.7112C81.9287 22.4072 82.7177 21.7312 82.6007 21.0252C82.5243 20.5585 82.0951 20.2041 81.6207 19.8122C81.2879 19.5375 80.933 19.2444 80.6617 18.8812C79.6217 17.4892 80.1377 15.4832 81.2367 14.3472C82.4071 13.1371 83.9793 12.723 85.3433 12.3637C86.6901 12.0089 87.834 11.7076 88.1877 10.7462C88.3208 10.3854 88.3026 9.8999 88.2839 9.39744C88.2688 8.99331 88.2533 8.57821 88.3157 8.20823C89.0287 3.95823 96.5836 4.46023 100.783 5.42823C108.855 -0.808743 120.505 -1.06074 129.639 3.48023C136.603 6.94161 143.103 12.4914 147.672 19.1075C152.154 11.7262 159.385 3.29016 167.797 1.83107C169.596 1.52107 171.285 1.78107 172.556 2.56907C174.111 3.53107 174.974 5.33107 174.657 6.94607C174.473 7.88407 173.94 8.67407 173.345 9.45707C177.463 7.83007 181.736 7.62907 184.698 11.0441C185.558 9.89007 186.723 8.96407 188.052 8.40507C188.552 8.19407 188.983 8.82607 188.604 9.21507L188.605 9.21707C188.701 9.38206 188.919 9.53527 189.161 9.70476C189.771 10.1321 190.529 10.663 189.84 11.7471C189.716 11.9388 189.716 11.9409 189.733 12.0792L189.738 12.1151C189.825 12.8801 189.471 13.2441 188.711 13.3671L186.284 13.7561C186.924 15.5451 186.894 17.4151 186.191 18.9931C187.991 20.4081 189.168 22.6681 188.727 24.7861C188.185 27.3857 185.352 29.3074 181.704 31.7823C176.688 35.1849 170.131 39.6334 165.867 48.3274C173.006 50.0043 178.936 51.7609 181.561 53.0733C185.94 55.2623 189.635 61.7463 191.468 66.6333L191.467 66.6323C191.573 66.9133 191.408 67.1983 191.157 67.2833C191.152 67.2899 191.149 67.295 191.146 67.2999C191.104 67.3689 191.025 67.4157 185.584 71.6043C185.292 71.8273 184.875 71.6723 184.792 71.3233C184.377 69.5803 182.877 67.9443 181.145 67.3443C179.273 66.6944 177.664 67.3349 176.243 68.5447C176.822 68.5501 177.078 68.6083 177.869 68.7884C178.163 68.8554 178.532 68.9392 179.018 69.0434L179.015 69.0424C183.022 69.9014 185.031 72.5664 184.675 76.5464C184.286 80.9004 180.929 84.0764 177.764 83.9594C175.685 83.8925 173.281 83.524 171.66 82.241C167.705 85.8719 158.604 93.6305 154.142 97.4171C153.852 97.6641 153.406 97.5071 153.329 97.1371C152.673 93.9586 148.673 91.7213 145.481 93.7647C145.598 93.7975 145.713 93.8339 145.828 93.8741L145.826 93.8751C150.646 94.6481 152.641 97.3741 152.283 101.373C151.902 105.628 148.619 108.719 145.538 108.604C144.068 108.556 142.912 108.381 142.03 108.067C141.413 107.969 140.84 107.762 140.322 107.465C138.861 108.742 137.327 110.035 136.817 110.462C136.727 110.538 136.613 110.579 136.496 110.579C136.206 110.579 125.962 109.171 113.852 107.337C98.003 120.494 55.3365 154.332 51.6667 157.016C47.8298 159.822 94.1587 121.472 112.248 107.094C106.651 106.24 100.738 105.307 95.2805 104.388C75.4551 120.857 38.3223 151.698 21.9126 164.572C21.7356 164.711 21.4816 164.474 21.6586 164.318C26.9557 159.661 80.8764 114.462 93.3126 104.054C88.8988 103.298 84.8608 102.559 81.6349 101.89C81.2659 102.156 80.7049 101.751 80.6219 101.503C77.6218 92.5378 77.6196 88.0192 80.2938 83.6369ZM92.0506 70.8931C93.889 69.1463 95.7589 67.4337 97.6592 65.7562C89.3156 59.7504 83.4141 50.6194 81.3422 41.4789C80.7145 40.855 80.1041 40.2136 79.5197 39.5502C78.0127 37.8382 77.5737 36.4202 79.5237 33.4882C80.0167 32.7472 80.5317 32.0212 81.0667 31.3092C80.5917 31.0382 80.1027 30.7472 79.6367 30.4142C74.8327 35.4052 74.5787 42.6402 76.3697 49.3312C78.8916 58.7518 84.8676 66.0978 92.0506 70.8931ZM91.2933 71.6163C84.2484 66.7815 79.1289 59.9187 76.4599 52.9149C72.7331 51.9344 69.6906 51.1275 68.2346 50.726C66.8796 50.353 66.6166 50.578 66.2696 51.684C63.6076 60.183 62.0766 68.999 61.7216 77.895C68.1022 79.3988 74.5 81.0241 80.8676 82.7563C81.795 81.4154 82.9708 80.0602 84.3859 78.5673C86.6344 76.195 88.9376 73.8774 91.2933 71.6163ZM96.293 103.549C101.844 104.477 107.772 105.403 113.325 106.24C115.78 104.298 117.605 102.89 118.56 102.216C118.956 101.937 119.416 102.559 119.071 102.879C118.288 103.604 116.842 104.844 114.888 106.475C125.738 108.101 134.838 109.349 136.345 109.553C137.416 108.652 138.516 107.712 139.486 106.866C138.007 105.574 137.192 103.442 137.429 101.185L104.489 95.1101C104.441 95.232 104.391 95.3524 104.338 95.4714C104.666 95.5853 104.868 96.0695 104.57 96.3694C102.4 98.5498 100.006 100.508 97.6215 102.46L97.6104 102.469C97.1706 102.829 96.7307 103.189 96.293 103.549ZM94.3145 103.216C89.9919 102.48 85.9625 101.75 82.6009 101.067C83.4264 100.375 84.1574 99.7674 84.8007 99.2328C87.9674 96.601 89.0111 95.7336 88.7609 95.1992C88.5199 94.6822 88.1799 93.4962 88.0879 92.6832C87.6259 88.6363 89.0639 85.2833 92.0349 83.4823C93.3669 82.6753 94.7509 82.5773 96.0408 83.1973C96.6232 83.4779 97.1653 83.8985 97.6334 84.411C97.127 84.2992 96.838 84.2599 96.296 84.2683C92.8091 84.2873 90.1961 87.2293 89.4771 91.9471C89.148 94.1021 89.7051 96.2001 91.0031 97.7041C92.5658 99.5133 95.5745 100.116 97.9912 100.142C97.9125 100.208 97.8338 100.274 97.7551 100.34C97.679 100.403 97.6028 100.467 97.5267 100.531L97.1805 100.821L97.1721 100.828C96.7071 101.218 96.2424 101.607 95.7766 101.994C95.5871 102.152 95.0855 102.571 94.3145 103.216ZM98.6197 85.8353C97.924 85.4591 97.1337 85.2662 96.302 85.2683C93.3421 85.2763 91.1061 87.9013 90.4661 92.0971C90.1811 93.9631 90.6531 95.7681 91.7601 97.0501C95.0271 100.833 100.748 97.3671 101.235 91.9161C101.387 90.2223 101.101 88.8261 100.519 87.7581C100.365 87.889 100.215 88.0162 100.07 88.1393C99.7708 88.3933 99.3018 88.2183 99.2508 87.8223C99.1626 87.1401 98.9413 86.462 98.6197 85.8353ZM102.471 86.0989C104.362 87.4162 105.286 89.492 105.13 92.1781L138.128 98.2631C139.347 94.9988 141.707 93.5027 144.076 93.5531C147.586 90.468 152.718 92.3082 154.088 96.1511C160.902 90.3638 167.815 84.399 170.948 81.5549C169.628 80.0004 169.171 77.8304 169.502 75.9674L136.504 69.4144C135.292 72.3044 132.768 74.3724 130.094 74.3724C127.606 74.3724 124.404 73.7734 122.761 71.8724C121.43 70.3314 120.861 68.1804 121.197 65.9724C121.935 61.1354 124.613 58.1184 128.186 58.0994C128.881 58.0927 129.157 58.1559 130.048 58.3602C130.358 58.4312 130.743 58.5193 131.245 58.6274C131.297 58.6384 131.348 58.6498 131.399 58.6614C130.669 57.6755 129.638 56.875 128.516 56.4863C127.376 56.0903 125.612 55.9383 123.693 57.4593C119.038 61.1486 119.884 65.7986 120.356 68.3953C120.51 69.2405 120.624 69.8681 120.496 70.1743C120.168 70.9569 109.179 80.3889 102.471 86.0989ZM133.558 59.4108C133.328 59.2972 133.088 59.192 132.837 59.0955C132.02 57.4911 130.52 56.1215 128.845 55.5413C126.898 54.8663 124.847 55.2703 123.074 56.6753C117.853 60.8134 118.897 66.15 119.399 68.7156L119.4 68.7173C119.489 69.1693 119.589 69.6813 119.598 69.7433C119.074 70.5203 109.489 78.8303 100.073 86.8273C99.5548 84.8753 98.1838 83.1193 96.4758 82.2973C91.1669 79.7403 84.6969 87.5633 87.7349 95.3372C87.1078 96.0304 85.0435 97.7416 83.2933 99.1924C82.5792 99.7842 81.9175 100.333 81.4269 100.751C77.6029 89.2183 79.0829 85.6183 85.1129 79.2543C97.6028 66.0773 111.79 54.5953 127.282 45.1273C129.944 43.5013 131.033 43.6913 132.747 45.6343C135.339 48.5733 137.17 52.1343 138.054 55.9493L133.558 59.4108ZM134.487 59.9541C136.515 61.3495 137.47 63.5892 137.222 66.4994L170.276 73.0874C171.189 70.8315 172.693 69.3049 174.569 68.763C176.387 66.7209 178.834 65.486 181.472 66.3993C183.27 67.0223 184.856 68.5983 185.541 70.3753L189.944 66.9863C181.603 64.3373 151.214 57.2283 138.686 56.7223L134.487 59.9541ZM164.887 48.0994C167.584 42.5975 172.106 37.2133 177.721 33.2461C178.659 32.5828 179.645 31.9408 180.617 31.3074C185.359 28.2193 189.789 25.3347 186.892 21.1741C186.549 20.6811 186.149 20.2541 185.709 19.8871C184.677 21.5229 183.077 22.701 181.479 23.8765C181.378 23.9513 181.276 24.0262 181.175 24.1011C172.503 30.5031 165.554 38.7845 160.774 47.189C162.174 47.4868 163.55 47.7913 164.887 48.0994ZM159.78 46.9797C164.919 37.7939 172.011 29.6288 180.58 23.2971L180.75 23.1717L180.937 23.0343C182.582 21.825 184.322 20.5466 185.2 18.7511C185.897 17.3261 185.921 15.5811 185.278 13.9171C184.532 14.0391 183.481 13.2871 183.803 12.5661C183.901 12.3461 184.009 12.1311 184.127 11.9211C181.947 9.19807 178.731 8.83607 175.353 9.81107C175.238 10.0217 175.006 10.3031 174.696 10.6784C173.467 12.165 171.02 15.1259 169.857 21.0061C169.833 21.1281 169.675 21.0801 169.661 20.9801C169.161 17.2251 171.304 13.4201 173.615 10.4181C173.107 10.6241 172.582 10.8631 172.053 11.1241C169.927 13.8451 167.359 16.9941 164.535 19.9971C163.64 22.6883 163.434 24.868 163.297 26.3124C163.221 27.1232 163.166 27.7023 163.024 28.0101C162.984 28.0981 162.856 28.0831 162.812 28.0101C162.413 27.3601 162.428 25.3231 162.458 24.5941C162.497 23.6391 162.612 22.7081 162.794 21.7951C160.692 23.9051 158.746 26.1961 156.978 28.6381C156.251 31.7434 156.204 33.5253 156.13 36.2567V36.2578C156.116 36.7893 156.101 37.3569 156.08 37.9771C156.078 38.0501 155.975 38.0641 155.954 37.9941C155.266 35.6791 155.27 33.1561 155.512 30.7611C154.921 31.6573 154.353 32.5721 153.809 33.5032C154.514 37.514 154.404 41.6319 153.264 45.7057C155.455 46.1053 157.643 46.5338 159.78 46.9797ZM152.276 45.5276C156.945 29.2601 144.322 11.8954 129.193 4.37623C125.134 2.35823 120.709 1.36523 116.4 1.36523C98.8296 1.36523 86.7727 17.4962 95.8997 38.5902C99.4408 46.7785 103.314 50.7571 109.724 55.8868C115.202 51.7395 120.887 47.8629 126.759 44.2743C128.899 42.9668 129.566 42.9871 131.299 43.04C131.411 43.0434 131.527 43.047 131.649 43.0503C137.244 43.2034 144.742 44.1845 152.276 45.5276ZM108.893 56.5196C106.106 54.2678 103.238 51.684 101.404 49.5442C100.456 48.4383 100.072 47.8945 99.8782 47.6193C99.7566 47.447 99.7092 47.38 99.6446 47.3462C99.6034 47.3247 99.5552 47.3167 99.4762 47.3035C99.433 47.2963 99.38 47.2875 99.3146 47.2742L99.2264 47.2563C96.3635 46.6748 92.1976 45.8286 89.2787 44.7032C88.971 45.0129 88.6236 45.2936 88.2835 45.5684C87.5504 46.1607 86.8511 46.7258 86.6557 47.4942C86.4167 48.4332 87.0227 49.4032 87.7287 49.9472C88.5657 50.5922 89.6427 50.8892 90.6847 51.1762C91.799 51.4834 92.7397 51.7387 93.5373 51.9551C97.4007 53.0034 97.9076 53.1409 98.5126 53.8562C99.2617 54.7432 99.1598 55.88 99.0642 56.9467C99.024 57.3952 98.9849 57.8313 99.0106 58.2312C99.1218 59.9298 100.534 61.2889 102.127 61.9235C104.345 60.0754 106.6 58.2737 108.893 56.5196ZM162.125 21.0521C158.851 24.3306 155.958 28.0331 153.516 32.0427C152.566 27.8368 150.738 23.7708 148.287 20.0228C152.637 12.757 159.76 4.23985 167.968 2.81707C171.83 2.14707 174.109 4.55307 173.675 6.75307C173.521 7.54007 173.023 8.23507 172.437 8.99807C169.746 12.4981 166.141 17.0301 162.125 21.0521ZM96.1256 53.7122C97.6506 54.1332 98.2156 54.5062 98.1236 56.1892C97.0983 55.0046 96.4964 54.3501 96.1741 53.9996C95.932 53.7363 95.8477 53.6446 95.8602 53.6287C95.8668 53.6202 95.9011 53.6334 95.9537 53.6535C95.9993 53.671 96.0586 53.6937 96.1256 53.7122ZM87.0557 45.2872L86.8906 45.1458C85.27 43.7591 79.8171 39.0929 79.3187 37.4252C78.9867 36.3182 79.6577 35.0932 80.3567 34.0422C80.8627 33.2812 81.3927 32.5352 81.9437 31.8052L83.5497 32.7102C83.0167 33.6592 82.8427 34.7162 83.1067 35.6722C83.4817 37.0302 84.5857 37.9042 85.7307 38.6272C84.7717 40.3492 85.4577 42.8572 88.2847 44.2682C88.0918 44.4392 87.8769 44.6127 87.6575 44.7898C87.4562 44.9522 87.2509 45.1179 87.0557 45.2872ZM84.4267 33.2042C84.9401 33.4936 85.3651 33.7314 85.718 33.929C87.1678 34.7404 87.4037 34.8724 87.5677 35.1072C87.9845 35.7057 87.4303 36.3876 86.7311 37.2478L86.7305 37.2486C86.5876 37.4244 86.4387 37.6077 86.2907 37.7992C85.2737 37.1592 84.3567 36.4432 84.0707 35.4062C83.8637 34.6552 84.0497 33.8742 84.4267 33.2042ZM78.7377 28.1492C78.0667 27.1582 77.8897 25.6252 78.7557 24.7762C79.219 24.3209 79.8939 24.1215 80.6059 23.9112C80.879 23.8305 81.1576 23.7482 81.4317 23.6492C82.6617 23.2052 83.8057 22.1702 83.5897 20.8602C83.452 20.0236 82.8341 19.5142 82.2588 19.0399C81.9574 18.7914 81.6676 18.5525 81.4647 18.2812C80.7537 17.3292 81.1677 15.8582 81.9577 15.0412C82.9251 14.0407 84.2905 13.6775 85.5844 13.3332C87.1434 12.9184 88.5987 12.5313 89.1287 11.0902C89.3449 10.5034 89.3147 9.94268 89.286 9.40903C89.2668 9.05184 89.2482 8.70593 89.3047 8.37323C89.8537 5.10023 96.5046 5.58523 99.7976 6.23623C88.1957 16.2512 90.4907 33.6472 98.8516 46.1572L98.5621 46.0984C95.6286 45.5033 89.2766 44.2148 87.4077 42.4822C86.5957 41.7302 86.0187 40.4112 86.4887 39.3472C86.6778 38.9181 87.0501 38.454 87.4386 37.9695C88.5378 36.5992 89.7674 35.0661 87.3507 33.7022C86.3126 33.1163 85.4073 32.6108 84.6149 32.1683L84.6135 32.1675C80.6992 29.9815 79.5414 29.3349 78.7397 28.1482L78.7377 28.1492ZM189.001 11.2012C189.048 11.1252 189.101 11.0416 189.108 11.0001C189.132 10.8511 188.655 10.5661 188.475 10.4591C188.213 10.3031 187.904 10.0221 187.738 9.67107C186.47 10.3821 185.426 11.4881 184.796 12.8001C184.888 12.8641 185.025 12.9271 185.098 12.9321C186.092 12.7731 186.81 12.6595 187.331 12.577C188.566 12.3816 188.694 12.3612 188.774 12.3261C188.756 12.3232 188.749 12.2727 188.744 12.2333L188.744 12.2281C188.697 11.8031 188.742 11.6061 188.996 11.2091L189.001 11.2012ZM46.4781 47.4809C52.1575 50.5239 58.0831 53.2001 64.1324 55.455C64.3758 54.5479 64.6318 53.6439 64.9004 52.7432C59.0091 49.9738 53.2492 46.8262 47.7431 43.3659C47.388 44.0799 47.103 44.6502 46.8745 45.1072L46.874 45.1082C45.9961 46.8643 45.9546 46.9475 45.9911 47.0879C46.0306 47.2403 46.3267 47.3995 46.4734 47.4784L46.4781 47.4809ZM65.3156 51.385C65.2748 51.5153 65.2342 51.6457 65.1939 51.7761C64.2019 51.309 63.2137 50.8307 62.2301 50.3419C61.4671 49.3419 60.7331 48.3219 60.0311 47.2829L62.2751 45.3979C63.1857 47.3668 64.2366 49.2677 65.417 51.0862C65.3815 51.1826 65.3479 51.2823 65.3156 51.385ZM49.6438 53.3293L63.6126 57.4743C63.2906 58.7804 62.9944 60.0925 62.7243 61.4097C58.4818 60.2192 54.2489 58.9051 50.0828 57.4843C49.9588 57.1143 49.8158 56.7743 49.6518 56.4553C49.5458 56.2483 49.3108 56.1433 49.0858 56.1993L48.7808 56.2763C48.9568 55.2643 49.2448 54.2783 49.6438 53.3293ZM60.8144 61.8932C61.2518 62.0233 61.7953 62.185 62.5278 62.3921C62.3884 63.1075 62.2567 63.8243 62.1326 64.5425C56.7707 63.9325 51.3636 63.261 46.0308 62.5433C47.2598 62.1113 48.4778 61.6733 49.6478 61.2413C50.1488 61.0573 50.4398 60.8143 50.5448 60.4243C52.4334 60.6382 53.8763 60.7959 55.0027 60.9189C57.7299 61.2169 58.6013 61.3121 59.4481 61.5115C59.8458 61.6052 60.238 61.7218 60.8144 61.8932ZM54.2808 64.6113C57.2892 64.9872 60.2004 65.3416 61.9648 65.5436C61.9235 65.7976 61.8831 66.0518 61.8438 66.3061C57.8919 66.4757 53.9347 66.8545 50.0208 67.4373L54.2808 64.6113ZM46.9388 68.9833C47.1315 68.8327 54.0858 67.6822 61.6922 67.3185C61.5186 68.5196 61.3663 69.7239 61.2355 70.9309C58.5521 71.1499 56.3995 71.3277 54.6697 71.4705L54.635 71.4734L54.6279 71.474C47.9629 72.0243 47.6111 72.0534 47.3201 71.9341C47.3039 71.9275 47.2879 71.9204 47.271 71.9129L47.2698 71.9123C46.2728 71.4703 46.7768 69.1093 46.9388 68.9833ZM58.2428 72.1733L61.1312 71.9404C61.0838 72.4224 61.0398 72.9048 60.9993 73.3876C56.8286 75.2499 52.7083 77.2962 48.6958 79.4973L48.3208 79.1243L58.2428 72.1733ZM45.6518 82.3923C45.7496 82.2133 53.0512 78.0844 60.9101 74.5259C60.8272 75.6641 60.7635 76.8041 60.7188 77.9454C56.0252 80.5314 51.2122 82.9503 46.3508 85.1663C46.2258 84.7023 46.1118 84.291 46.0135 83.9366C45.757 83.0116 45.6077 82.4733 45.6518 82.3923ZM69.5587 40.349C69.669 41.9053 69.8517 44.4829 70.4828 47.9477C69.6171 48.3592 68.7578 48.7839 67.9054 49.2216C66.9515 46.0393 66.2303 42.7872 65.7507 39.4982C66.5042 39.3021 67.0933 39.1475 67.5551 39.0263L67.5562 39.026C69.1278 38.6135 69.2253 38.5879 69.3127 38.6312C69.4414 38.6952 69.483 39.2822 69.5587 40.349ZM48.5128 72.9493C46.1678 75.7543 43.7778 78.5353 41.3708 81.2533L40.1408 80.3593C42.1508 77.7283 44.2088 75.0673 46.2798 72.4213C46.9018 73.0842 47.7373 73.0141 48.3725 72.9608L48.468 72.9529L48.5128 72.9493ZM47.6128 67.8223C47.5465 67.8336 47.4823 67.8442 47.4201 67.8545C46.5838 67.9924 46.1088 68.0708 45.8668 68.9773L39.7318 73.0363C39.2698 73.3433 38.8408 73.4613 38.7138 73.3163C38.6587 73.2555 38.6251 73.12 38.5896 72.9765L38.5839 72.9536C38.5323 72.7465 38.4739 72.5116 38.3238 72.2913C38.1757 72.0741 37.9841 71.9274 37.8393 71.8166C37.7348 71.7365 37.6546 71.6751 37.6328 71.6193L37.6351 71.6102C37.6638 71.5046 37.7914 71.4258 43.4914 67.9061C45.0959 66.9153 47.142 65.6518 49.7518 64.0383L52.7558 64.4203L47.6128 67.8223ZM49.5768 60.1663C49.4548 60.3543 39.4158 63.8853 31.1438 66.3433C30.8908 65.0263 30.8228 62.9783 30.9788 62.7803C31.1548 62.5603 40.0968 59.5073 48.9308 57.2693C49.3538 58.2463 49.6668 60.0313 49.5768 60.1663ZM139.68 105.64C142.746 109.189 148.118 105.934 148.576 100.809H148.574C148.931 96.8211 146.699 94.5571 143.945 94.5641C141.823 94.5701 140.097 96.0101 139.131 98.4481L140.049 98.6171C141.399 95.6081 144.472 95.4501 146.04 97.1571C148.377 99.6991 146.496 105.071 142.856 105.071C141.088 105.071 139.598 103.577 139.46 101.559L138.418 101.367C138.265 102.984 138.716 104.524 139.68 105.64ZM144.053 100.881C143.903 101.696 143.119 102.235 142.306 102.084H142.305L140.484 101.748C140.689 103.163 141.765 104.093 142.868 104.071C145.589 104.057 147.076 99.7601 145.305 97.8341C144.218 96.6511 142.147 96.7291 141.073 98.8061L142.85 99.1341C143.665 99.2841 144.203 100.067 144.053 100.881ZM123.521 71.2194C126.88 75.1104 132.77 71.5504 133.272 65.9394C133.667 61.5374 131.184 59.0924 128.194 59.1004C125.147 59.1084 122.846 61.8074 122.188 66.1234C121.896 68.0424 122.381 69.9004 123.521 71.2194ZM171.74 80.9384C174.889 84.5854 180.423 81.2644 180.897 75.9704H180.896C181.265 71.8454 178.949 69.5364 176.13 69.5444C174.019 69.5504 172.289 70.9334 171.278 73.2874L172.257 73.4824C173.691 70.6394 176.704 70.5254 178.271 72.2294C180.662 74.8294 178.74 80.3324 175.011 80.3324C173.11 80.3324 171.5 78.6314 171.527 76.3694L170.487 76.1624C170.216 77.9624 170.672 79.7024 171.74 80.9384ZM176.884 75.9324C176.742 76.6464 176.115 77.1404 175.415 77.1404L172.532 76.5674C172.596 78.0254 173.531 79.3104 175.023 79.3314C176.622 79.3534 178.122 77.6534 178.298 75.6864C178.644 71.8344 174.828 71.0124 173.288 73.6864L175.706 74.1684C176.518 74.3304 177.046 75.1204 176.884 75.9324ZM133.496 44.9733C136.2 48.0393 138.109 51.7543 139.029 55.7343C152.15 56.3453 182.311 63.5793 190.148 66.0053C188.281 61.4403 184.954 55.8873 181.114 53.9673C175.226 51.0233 148.289 44.6813 132.611 44.0753C132.934 44.3573 133.228 44.6693 133.496 44.9733Z" fill="#441752"/>
<path d="M19.9832 145.627L19.985 145.625L19.986 145.624L19.9981 145.613C22.8099 143.004 25.6219 140.396 28.4495 137.807C32.4596 134.137 40.7754 126.657 49.0455 119.219C59.5775 109.746 70.0355 100.339 71.4325 98.9514C71.8945 98.4924 71.2205 97.8734 70.7365 98.2554C65.0595 102.728 19.2525 144.99 15.8905 148.149C10.8245 152.91 5.78753 157.715 0.949528 162.708C0.885528 162.774 0.981528 162.866 1.04853 162.807L1.04953 162.808C7.48307 157.223 13.7344 151.424 19.9832 145.627Z" fill="#441752"/>
<path d="M38.4113 174.73L38.415 174.727C39.0636 174.203 39.7117 173.679 40.3628 173.161C41.2482 172.457 49.5897 166.067 60.3239 157.845L60.3308 157.84L60.3361 157.836L60.3382 157.834C81.1721 141.875 111.008 119.02 112.847 117.422C113.231 117.088 112.735 116.463 112.307 116.723C100.909 123.642 41.7228 170.251 32.5738 179.06C32.5178 179.114 32.5928 179.217 32.6588 179.17C34.637 177.782 36.5257 176.255 38.41 174.731L38.4113 174.73Z" fill="#441752"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M37.7473 76.1078C38.0869 76.4241 38.4261 76.74 38.7492 77.0718C38.9192 77.2468 38.9382 77.5198 38.7922 77.7168L27.3462 93.1519C27.2492 93.2829 27.0982 93.3539 26.9452 93.3539L26.9239 93.3541L26.9096 93.3543L26.9013 93.3543L26.8924 93.3541C26.7813 93.35 26.6726 93.2816 25.375 92.4654C24.9265 92.1833 24.3359 91.8119 23.5542 91.3229C23.3062 91.1679 23.2442 90.8319 23.4202 90.5979C27.3512 85.3918 31.5762 80.1898 35.9772 75.1348C36.0692 75.0288 36.2002 74.9668 36.3402 74.9628C36.5625 74.9628 36.6152 75.0145 37.0019 75.3942C37.1665 75.5559 37.3916 75.777 37.7162 76.0788L37.7473 76.1078ZM24.5482 90.7659L26.8182 92.1859L37.7322 77.4688C37.5083 77.251 37.2846 77.0434 37.0574 76.8326C36.8363 76.6274 36.6114 76.4187 36.3802 76.1948C32.2422 80.9648 28.2662 85.8618 24.5482 90.7659Z" fill="#441752"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M40.3733 85.9809C39.5193 85.7249 38.6143 85.6709 38.0053 85.6709C37.8073 85.6709 37.6273 85.7879 37.5473 85.9699C37.0686 87.0596 35.862 89.7669 34.6444 92.4988C33.3894 95.3146 32.1227 98.1567 31.6293 99.281C31.2653 100.107 31.5453 100.677 32.3913 100.852C32.6436 100.904 32.8784 100.958 33.0977 101.009C34.6026 101.354 35.3809 101.533 36.0913 99.914C37.9033 95.784 39.5543 91.522 40.9993 87.2469C41.2213 86.5859 40.9773 86.1619 40.3743 85.9799L40.3733 85.9809ZM35.1743 99.513C34.8163 100.328 34.6623 100.303 34.1063 100.188C32.6893 99.895 32.5523 99.866 32.4813 99.847C32.5165 99.7211 34.6691 94.8933 36.3735 91.0706L36.3745 91.0683C37.2836 89.0294 38.065 87.2769 38.3293 86.6769C38.9333 86.6979 39.5153 86.7819 40.0483 86.9329C38.6133 91.178 36.9743 95.411 35.1743 99.513Z" fill="#441752"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M20.1087 102.418C21.4661 101.876 21.8858 101.708 22.1459 101.899L22.1469 101.9C22.2869 102.003 22.3629 102.17 22.3489 102.343C22.2982 102.981 22.2713 103.516 22.2485 103.967C22.1572 105.778 22.1332 106.254 20.9159 106.679C18.4029 107.555 6.92694 111.355 4.30097 111.355C3.57897 111.355 3.24997 110.902 3.17797 110.184L3.00497 108.447C2.98097 108.206 3.13297 107.982 3.36697 107.916C13.4131 105.091 17.9484 103.281 20.1087 102.418ZM4.22797 110.36C6.58994 110.382 18.2199 106.558 20.5859 105.733C20.6158 105.723 20.6442 105.713 20.671 105.704C20.8293 105.65 20.9365 105.613 21.0116 105.543C21.1695 105.394 21.1849 105.094 21.233 104.163C21.2484 103.865 21.2671 103.502 21.2949 103.059C16.2299 105.054 10.7129 106.877 4.04097 108.764C4.05127 108.866 4.06336 109.004 4.07674 109.158C4.11921 109.646 4.17474 110.284 4.22797 110.36Z" fill="#441752"/>
</svg>
`;

const onboardingData = [
    {
        id: '1',
        title: 'Welcome to Foodie',
        subtitle: 'Join the fight against food waste and foster a sustainable food culture.',
        image: svgIcon,
    },
    {
        id: '2',
        title: 'Every Meal Matters',
        subtitle: 'Each meal is an opportunity to make a positive impact on our planet.',
        image: require('../assets/No-waste-food1.png'),
    },
    {
        id: '3',
        title: 'Together, We Can',
        subtitle: 'Let’s ensure every meal counts and reduce food waste together.',
        image: require('../assets/No-waste-food.png'),
    },
];

const OnboardingScreen = ({ navigation }) => {
    const [currentIndex, setCurrentIndex] = useState(0);
    const scrollX = useRef(new Animated.Value(0)).current;
    const slidesRef = useRef(null);

    const viewableItemsChanged = useRef(({ viewableItems }) => {
        if (viewableItems && viewableItems.length > 0) {
            setCurrentIndex(viewableItems[0].index);
        }
    }).current;

    const viewConfig = useRef({ viewAreaCoveragePercentThreshold: 50 }).current;

    const scrollTo = () => {
        if (slidesRef.current && currentIndex < onboardingData.length - 1) {
            slidesRef.current.scrollToIndex({ index: currentIndex + 1 });
        } else {
            navigation.navigate('Login');
        }
    };

    const skipToLogin = () => {
        navigation.navigate('Login');
    };

    return (
        <LinearGradient
            colors={[COLORS.gradientStart, COLORS.gradientEnd]}
            style={styles.container}
        >
            {/* Bouton Skip en haut à droite */}
            <TouchableOpacity style={styles.skipButton} onPress={skipToLogin}>
                <Text style={styles.skipText}>Skip</Text>
            </TouchableOpacity>

            <FlatList
                data={onboardingData}
                renderItem={({ item }) => {
                    if (!item) return null; // Vérifiez que l'élément n'est pas null
                    return (
                        <View style={styles.slide}>
                            {item.id === '1' ? (
                                <SvgXml xml={item.image} width={300} height={300} />
                            ) : (
                                <Image source={item.image} style={styles.image} />
                            )}
                            <Text style={styles.title}>{item.title}</Text>
                            <Text style={styles.subtitle}>{item.subtitle}</Text>
                        </View>
                    );
                }}
                horizontal
                pagingEnabled
                showsHorizontalScrollIndicator={false}
                keyExtractor={(item) => item.id}
                onScroll={Animated.event(
                    [{ nativeEvent: { contentOffset: { x: scrollX } } }],
                    { useNativeDriver: false }
                )}
                scrollEventThrottle={32}
                onViewableItemsChanged={viewableItemsChanged}
                viewabilityConfig={viewConfig}
                ref={slidesRef}
            />
            <View style={styles.footer}>
                <View style={styles.pagination}>
                    {onboardingData.map((_, i) => {
                        const inputRange = [(i - 1) * width, i * width, (i + 1) * width];
                        const dotWidth = scrollX.interpolate({
                            inputRange,
                            outputRange: [10, 20, 10],
                            extrapolate: 'clamp',
                        });
                        const opacity = scrollX.interpolate({
                            inputRange,
                            outputRange: [0.3, 1, 0.3],
                            extrapolate: 'clamp',
                        });
                        return (
                            <Animated.View
                                key={i}
                                style={[styles.dot, { width: dotWidth, opacity }]}
                            />
                        );
                    })}
                </View>
                <TouchableOpacity
                    style={styles.button}
                    onPress={scrollTo}
                    activeOpacity={0.8}
                >
                    <Text style={styles.buttonText}>
                        {currentIndex === onboardingData.length - 1 ? 'Get Started' : 'Next'}
                    </Text>
                    <Ionicons
                        name="arrow-forward"
                        size={20}
                        color={'#441752'}
                        style={styles.icon}
                    />
                </TouchableOpacity>
            </View>
        </LinearGradient>
    );
};

const styles = StyleSheet.create({
    container: {
        flex: 1,
        justifyContent: 'center',
        alignItems: 'center',
    },
    slide: {
        width: width,
        justifyContent: 'center',
        alignItems: 'center',
        paddingHorizontal: 20,
    },
    image: {
        width: 300,
        height: 300,
        resizeMode: 'contain',
        marginBottom: 30,
    },
    title: {
        fontSize: 28,
        fontWeight: '600',
        color: COLORS.text,
        textAlign: 'center',
        marginBottom: 10,
    },
    subtitle: {
        fontSize: 16,
        color: COLORS.text,
        textAlign: 'center',
        marginBottom: 20,
        paddingHorizontal: 20,
        lineHeight: 22,
    },
    footer: {
        position: 'absolute',
        bottom: 50,
        left: 0,
        right: 0,
        alignItems: 'center',
    },
    pagination: {
        flexDirection: 'row',
        justifyContent: 'center',
        alignItems: 'center',
        marginBottom: 20,
    },
    dot: {
        height: 8,
        borderRadius: 50,
        backgroundColor: COLORS.text,
        marginHorizontal: 5,
    },
    button: {
        paddingVertical: 15,
        paddingHorizontal: 30,
        borderRadius: 5,
        borderColor: '#eee',
        borderWidth: 1,
        flexDirection: 'row',
        alignItems: 'center',
    },
    buttonText: {
        color: '#441752',
        fontSize: 18,
        fontWeight: 'bold',
        marginRight: 10,
    },
    icon: {
        marginLeft: 5,
    },
    skipButton: {
        position: 'absolute',
        top: 50,
        right: 20,
        zIndex: 1,
        paddingVertical: 10,
        paddingHorizontal: 17,
        borderRadius: 5,
        borderWidth: 1,
        borderColor: '#eee',
    },
    skipText: {
        color: "#441752",
        fontSize: 16,
        fontFamily: 'SemiBold',
        letterSpacing: 2,
    },
});

export default OnboardingScreen;